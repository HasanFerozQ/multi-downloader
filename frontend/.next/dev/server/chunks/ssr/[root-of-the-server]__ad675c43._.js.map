{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Hasan-PC/Desktop/multi-downloader/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\n\ninterface Format {\n  id: string;\n  quality: string;\n  height: number;\n  ext: string;\n  has_audio: boolean;\n}\n\ninterface VideoData {\n  title: string;\n  thumbnail: string;\n  duration: number | null;\n  formats: Format[];\n  original_url: string;\n}\n\nconst BACKEND = \"http://localhost:8000\";\n\nfunction formatDuration(totalSeconds: number): string {\n  const s = Math.floor(totalSeconds);\n  const h = Math.floor(s / 3600);\n  const m = Math.floor((s % 3600) / 60);\n  const sec = s % 60;\n  if (h > 0) return `${h}:${String(m).padStart(2, \"0\")}:${String(sec).padStart(2, \"0\")}`;\n  return `${m}:${String(sec).padStart(2, \"0\")}`;\n}\n\nexport default function Home() {\n  const [url, setUrl] = useState(\"\");\n  const [videoData, setVideoData] = useState<VideoData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [downloadingId, setDownloadingId] = useState<string | null>(null);\n\n  const handleAnalyze = async () => {\n    const trimmed = url.trim();\n    if (!trimmed) { setError(\"Please paste a link first!\"); return; }\n    setError(\"\");\n    setVideoData(null);\n    setLoading(true);\n    try {\n      const res = await axios.get(`${BACKEND}/analyze`, {\n        params: { url: trimmed },\n        timeout: 30000,\n      });\n      setVideoData(res.data);\n    } catch (err: any) {\n      if (!err.response) {\n        setError(\"Cannot reach backend. Start it with: uvicorn main:app --reload\");\n      } else {\n        setError(err.response?.data?.detail || \"Could not fetch video. Link may be private or unsupported.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownload = async (formatId: string) => {\n    if (!videoData) return;\n    setDownloadingId(formatId);\n    setError(\"\");\n\n    try {\n      const params = new URLSearchParams({\n        url: url.trim(),\n        format_id: formatId,\n        title: videoData.title,\n      });\n\n      // Fetch as blob so we can show progress and trigger download properly\n      const res = await axios.get(`${BACKEND}/download?${params}`, {\n        responseType: \"blob\",\n        timeout: 300000, // 5 min timeout for large videos\n      });\n\n      const ext = formatId === \"mp3\" ? \"mp3\" : \"mp4\";\n      const filename = `${videoData.title.slice(0, 60).replace(/[^\\w\\s-]/g, \"\").trim()}.${ext}`;\n\n      // Trigger browser download\n      const blobUrl = window.URL.createObjectURL(new Blob([res.data]));\n      const link = document.createElement(\"a\");\n      link.href = blobUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(blobUrl);\n\n    } catch (err: any) {\n      if (!err.response) {\n        setError(\"Download failed — backend may be offline.\");\n      } else {\n        // Parse error from blob response\n        const text = await err.response?.data?.text?.();\n        try {\n          const json = JSON.parse(text || \"{}\");\n          setError(json.detail || \"Download failed. Video may be private or region-locked.\");\n        } catch {\n          setError(\"Download failed. Video may be private or region-locked.\");\n        }\n      }\n    } finally {\n      setDownloadingId(null);\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gray-900 text-white flex flex-col items-center px-4 py-10\">\n      <div className=\"max-w-3xl w-full text-center\">\n\n        <h1 className=\"text-4xl md:text-6xl font-extrabold mb-3 bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent\">\n          5-in-1 Downloader\n        </h1>\n        <p className=\"text-gray-400 mb-1 text-sm md:text-base\">\n          YouTube • TikTok • Instagram • Facebook • X (Twitter)\n        </p>\n        <p className=\"text-gray-600 mb-8 text-xs\">No Spam. No Ads. High Speed HD Downloads.</p>\n\n        {/* Input */}\n        <div className=\"flex flex-col md:flex-row gap-2 bg-gray-800 p-2 rounded-2xl shadow-2xl border border-gray-700\">\n          <input\n            className=\"flex-1 bg-transparent p-4 outline-none text-base md:text-lg placeholder-gray-500\"\n            placeholder=\"Paste YouTube, TikTok, IG, FB or X link...\"\n            value={url}\n            onChange={(e) => { setUrl(e.target.value); setError(\"\"); }}\n            onKeyDown={(e) => e.key === \"Enter\" && handleAnalyze()}\n          />\n          <button\n            onClick={handleAnalyze}\n            disabled={loading}\n            className=\"bg-blue-600 hover:bg-blue-500 px-8 py-4 rounded-xl font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {loading ? (\n              <span className=\"flex items-center gap-2 justify-center\">\n                <svg className=\"animate-spin h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\" />\n                </svg>\n                Analyzing...\n              </span>\n            ) : \"Analyze\"}\n          </button>\n        </div>\n\n        {/* Error */}\n        {error && (\n          <div className=\"mt-4 p-4 bg-red-900/50 border border-red-500 rounded-xl text-red-300 text-sm text-left\">\n            ⚠️ {error}\n          </div>\n        )}\n\n        {/* Skeleton */}\n        {loading && (\n          <div className=\"mt-10 bg-gray-800 rounded-3xl overflow-hidden border border-gray-700 animate-pulse\">\n            <div className=\"w-full h-64 bg-gray-700\" />\n            <div className=\"p-6 space-y-4\">\n              <div className=\"h-5 bg-gray-700 rounded w-3/4 mx-auto\" />\n              <div className=\"grid grid-cols-2 gap-4\">\n                {[1,2,3,4].map(i => <div key={i} className=\"h-14 bg-gray-700 rounded-xl\" />)}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Results */}\n        {videoData && !loading && (\n          <div className=\"mt-10 bg-gray-800 rounded-3xl overflow-hidden border border-gray-700\">\n            <div className=\"relative bg-gray-700\">\n              {videoData.thumbnail ? (\n                <img\n                  src={videoData.thumbnail}\n                  alt=\"Thumbnail\"\n                  className=\"w-full h-64 object-cover\"\n                  onError={(e) => { (e.currentTarget as HTMLImageElement).style.display = \"none\"; }}\n                />\n              ) : (\n                <div className=\"w-full h-64 flex items-center justify-center text-gray-500 text-sm\">\n                  No thumbnail\n                </div>\n              )}\n              {videoData.duration != null && (\n                <span className=\"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded font-mono\">\n                  {formatDuration(videoData.duration)}\n                </span>\n              )}\n            </div>\n\n            <div className=\"p-6\">\n              <h2 className=\"text-lg md:text-xl font-semibold mb-6 line-clamp-2 text-left\">\n                {videoData.title}\n              </h2>\n\n              {/* Global downloading indicator */}\n              {downloadingId && (\n                <div className=\"mb-4 p-3 bg-blue-900/50 border border-blue-500 rounded-xl text-blue-300 text-sm flex items-center gap-2\">\n                  <svg className=\"animate-spin h-4 w-4 flex-shrink-0\" viewBox=\"0 0 24 24\" fill=\"none\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\" />\n                  </svg>\n                  Preparing download... This may take a minute for large videos.\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                {videoData.formats.length === 0 && (\n                  <p className=\"col-span-2 text-gray-400 text-sm py-2\">\n                    ⚠️ No video formats found — only audio available.\n                  </p>\n                )}\n\n                {videoData.formats.map((f) => {\n                  const isDownloading = downloadingId === f.id;\n                  return (\n                    <button\n                      key={f.id}\n                      onClick={() => handleDownload(f.id)}\n                      disabled={downloadingId !== null}\n                      className=\"flex items-center justify-between p-4 bg-gray-700 hover:bg-gray-600 rounded-xl font-medium transition-colors group disabled:opacity-50 disabled:cursor-not-allowed w-full\"\n                    >\n                      <span className=\"flex items-center gap-2\">\n                        <span className=\"text-blue-400 font-mono text-sm bg-gray-900 px-2 py-1 rounded\">\n                          {f.quality}\n                        </span>\n                        <span className=\"text-gray-300\">MP4</span>\n                      </span>\n                      <span className=\"text-gray-500 group-hover:text-white transition-colors text-sm\">\n                        {isDownloading ? (\n                          <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\">\n                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\" />\n                          </svg>\n                        ) : \"↓ Download\"}\n                      </span>\n                    </button>\n                  );\n                })}\n\n                {/* MP3 */}\n                <button\n                  onClick={() => handleDownload(\"mp3\")}\n                  disabled={downloadingId !== null}\n                  className=\"flex items-center justify-between p-4 bg-emerald-700 hover:bg-emerald-600 rounded-xl font-bold transition-colors group disabled:opacity-50 disabled:cursor-not-allowed md:col-span-2 w-full\"\n                >\n                  <span className=\"flex items-center gap-2\">\n                    <span className=\"text-emerald-200 font-mono text-sm bg-emerald-900 px-2 py-1 rounded\">MP3</span>\n                    <span>Audio Only</span>\n                  </span>\n                  <span className=\"text-emerald-300 group-hover:text-white transition-colors text-sm\">\n                    {downloadingId === \"mp3\" ? (\n                      <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\" fill=\"none\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\" />\n                      </svg>\n                    ) : \"↓ Download\"}\n                  </span>\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <p className=\"mt-8 text-gray-700 text-xs\">For personal use only. Respect copyright laws.</p>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}