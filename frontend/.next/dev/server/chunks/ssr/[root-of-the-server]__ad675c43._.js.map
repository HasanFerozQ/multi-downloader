{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Hasan-PC/Desktop/multi-downloader/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { Download, Link2, Monitor, Music, CheckCircle, Loader2, AlertCircle, Coffee, ShieldCheck, Crown } from \"lucide-react\";\n\nconst BACKEND = \"http://localhost:8000\";\nconst WS_BACKEND = \"ws://localhost:8000\";\n\nexport default function Home() {\n  const [url, setUrl] = useState(\"\");\n  const [videoData, setVideoData] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [downloadProgress, setProgress] = useState<any>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleAnalyze = async () => {\n    setLoading(true);\n    setError(null);\n    setVideoData(null);\n    try {\n      const res = await axios.get(`${BACKEND}/analyze`, { params: { url: url.trim() } });\n      setVideoData(res.data);\n    } catch (err: any) {\n      setError(err.response?.data?.detail || \"Error analyzing link.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const triggerBrowserDownload = (taskId: string, title: string) => {\n    // Direct trigger for high retention - no pop-ups\n    const downloadUrl = `${BACKEND}/download/file/${taskId}?title=${encodeURIComponent(title)}`;\n    window.location.href = downloadUrl;\n  };\n\n  const handleDownload = async (formatId: string) => {\n    setError(null);\n    try {\n      const { data } = await axios.get(`${BACKEND}/download/start`, {\n        params: { url: url.trim(), format_id: formatId }\n      });\n      const ws = new WebSocket(`${WS_BACKEND}/ws/progress/${data.task_id}`);\n      ws.onmessage = (event) => {\n        const msg = JSON.parse(event.data);\n        setProgress({ progress: msg.progress, status: msg.status });\n        if (msg.status === \"Finished\") {\n          triggerBrowserDownload(data.task_id, videoData.title);\n          setProgress(null);\n          ws.close();\n        }\n      };\n    } catch (err) { setError(\"Server capacity reached.\"); }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-[#020617] text-slate-200 flex flex-col items-center font-sans pb-32\">\n      \n      {/* RESPONSIVE AD PILLARS - Hidden on Mobile/Tablet, only visible on XL Desktop */}\n      <div className=\"fixed left-0 top-0 w-[160px] h-full hidden xl:flex flex-col items-center justify-center bg-white/[0.02] border-r border-white/5 z-0\">\n        <div className=\"text-[10px] font-bold text-slate-700 uppercase tracking-widest rotate-90 mb-8\">Advertisement</div>\n        {/* Ad Code Placeholder */}\n        <div className=\"w-[120px] h-[600px] bg-white/5 border border-white/5 rounded flex items-center justify-center italic text-[10px] text-slate-800\">120x600 Ad</div>\n      </div>\n\n      <div className=\"fixed right-0 top-0 w-[160px] h-full hidden xl:flex flex-col items-center justify-center bg-white/[0.02] border-l border-white/5 z-0\">\n        <div className=\"text-[10px] font-bold text-slate-700 uppercase tracking-widest rotate-90 mb-8\">Advertisement</div>\n        {/* Ad Code Placeholder */}\n        <div className=\"w-[120px] h-[600px] bg-white/5 border border-white/5 rounded flex items-center justify-center italic text-[10px] text-slate-800\">120x600 Ad</div>\n      </div>\n\n      {/* MAIN CONTENT - Max-width ensures content never touches ads */}\n      <div className=\"max-w-4xl w-full px-6 pt-12 z-10\">\n        <header className=\"flex flex-col items-center text-center mb-10\">\n          <img src=\"/logo.jpg\" alt=\"King Logo\" className=\"w-[100px] h-[100px] rounded-2xl mb-4 shadow-2xl\" />\n          <h1 className=\"text-4xl md:text-5xl font-black text-white\">KING <span className=\"text-blue-500\">DOWNLOADER</span></h1>\n          <div className=\"mt-4 flex items-center gap-2 bg-green-500/10 text-green-400 px-4 py-1.5 rounded-full border border-green-500/20 text-[9px] md:text-[10px] font-bold uppercase tracking-widest\">\n            <ShieldCheck size={14} /> NO REDIRECTS • NO POP-UP ADS • 100% SAFE\n          </div>\n        </header>\n\n        {/* SEARCH AREA */}\n        <div className=\"relative group max-w-2xl mx-auto mb-10\">\n          <div className=\"relative flex flex-col md:flex-row items-center bg-[#0f172a] rounded-2xl p-2 border border-white/5 gap-2\">\n            <div className=\"flex flex-1 items-center w-full\">\n              <Link2 className=\"ml-4 text-slate-500\" />\n              <input \n                className=\"flex-1 p-4 bg-transparent outline-none text-white text-sm md:text-base\"\n                placeholder=\"Paste Link (YouTube, FB, TikTok...)\"\n                value={url}\n                onChange={(e) => setUrl(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleAnalyze()}\n              />\n            </div>\n            <button onClick={handleAnalyze} className=\"w-full md:w-auto bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-xl font-bold transition-all\">\n              {loading ? <Loader2 className=\"animate-spin\" /> : \"PROCESS\"}\n            </button>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"max-w-2xl mx-auto mb-8 flex items-center gap-3 bg-red-500/10 border border-red-500/50 p-4 rounded-xl text-red-400\">\n            <AlertCircle size={18} />\n            <p className=\"text-xs md:text-sm font-medium\">{error}</p>\n          </div>\n        )}\n\n        {/* PROGRESS + AD AREA */}\n        {downloadProgress && (\n          <div className=\"max-w-2xl mx-auto mb-10 text-center\">\n            {/* Mobile-Friendly Banner Ad */}\n            <div className=\"w-full max-w-[728px] h-[90px] bg-white/[0.03] rounded-xl mx-auto mb-6 flex items-center justify-center text-slate-700 text-[10px] font-bold border border-white/5\">\n              SAFE RESPONSIVE AD (320x50 or 728x90)\n            </div>\n            <div className=\"bg-[#0f172a] p-6 md:p-8 rounded-3xl border border-blue-500/20 shadow-2xl\">\n               <h3 className=\"text-lg md:text-xl font-bold mb-4\">{downloadProgress.status === \"Finished\" ? \"Complete!\" : \"Downloading...\"}</h3>\n               <div className=\"w-full bg-slate-900 h-3 md:h-4 rounded-full overflow-hidden\">\n                  <div className=\"bg-blue-600 h-full transition-all duration-300 shadow-[0_0_15px_rgba(37,99,235,0.4)]\" style={{width: `${downloadProgress.progress}%`}}></div>\n               </div>\n               <p className=\"mt-4 text-2xl md:text-3xl font-black text-white\">{Math.round(downloadProgress.progress)}%</p>\n            </div>\n          </div>\n        )}\n\n        {/* RESULT CARD */}\n        {videoData && !downloadProgress && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10 bg-white/[0.02] backdrop-blur-3xl p-6 md:p-10 rounded-[2rem] md:rounded-[2.5rem] border border-white/5\">\n            <img src={videoData.thumbnail} className=\"rounded-2xl md:rounded-3xl aspect-video object-cover\" alt=\"thumb\" />\n            <div className=\"flex flex-col justify-between\">\n              <h2 className=\"text-xl md:text-2xl font-bold text-white mb-6 line-clamp-2\">{videoData.title}</h2>\n              <div className=\"space-y-3\">\n                {videoData.formats.map((f: any) => (\n                  <button key={f.id} onClick={() => handleDownload(f.id)} className=\"w-full flex justify-between bg-white/5 hover:bg-blue-600 p-4 rounded-xl border border-white/5 transition-all group\">\n                    <span className=\"font-bold text-xs md:text-sm uppercase tracking-wider\">{f.quality} MP4 VIDEO</span>\n                    <Download size={18} className=\"text-slate-500 group-hover:text-white\" />\n                  </button>\n                ))}\n                <button onClick={() => handleDownload(\"mp3\")} className=\"w-full flex justify-between bg-white/5 hover:bg-cyan-600 p-4 rounded-xl border border-white/5 transition-all group\">\n                  <span className=\"font-bold text-xs md:text-sm uppercase tracking-wider\">320kbps MP3 AUDIO</span>\n                  <Music size={18} className=\"text-slate-500 group-hover:text-white\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* DONATION SECTION */}\n        <section className=\"mt-20 bg-gradient-to-br from-yellow-600/5 to-orange-600/5 border border-yellow-500/10 p-8 md:p-12 rounded-[2.5rem] md:rounded-[3rem] text-center\">\n          <Coffee className=\"text-yellow-500 mx-auto mb-4\" size={32} />\n          <h2 className=\"text-xl md:text-2xl font-bold text-white mb-2\">Support the Server</h2>\n          <p className=\"text-slate-500 max-w-lg mx-auto mb-8 text-xs md:text-sm\">\n            Maintaining a safe, no-redirect service is expensive. If we saved your time today, consider a 1 USDT donation to keep King Downloader free forever.\n          </p>\n          <div className=\"inline-block bg-white p-3 rounded-2xl shadow-2xl mb-6\">\n            <img src=\"/binance_qr.png\" alt=\"Binance QR\" className=\"w-28 h-28 md:w-32 md:h-32\" />\n          </div>\n          <p className=\"text-[9px] md:text-[10px] font-mono text-yellow-600\">Binance Pay ID: YOUR_ID_HERE</p>\n        </section>\n\n        {/* SEO SECTION */}\n        <section className=\"mt-24 grid grid-cols-1 md:grid-cols-2 gap-12 border-t border-white/5 pt-16 text-slate-500 text-xs md:text-sm leading-relaxed\">\n          <article>\n            <h4 className=\"text-white font-bold mb-4 flex items-center gap-2\"><Crown size={14} className=\"text-blue-500\" /> Safe YouTube 1080p Download</h4>\n            <p>Our downloader uses an advanced merging engine to deliver 1080p Full HD video with crystal clear audio. Unlike other sites, we prioritize a 100% safe environment with zero malicious pop-up redirects.</p>\n          </article>\n          <article>\n            <h4 className=\"text-white font-bold mb-4 flex items-center gap-2\"><Crown size={14} className=\"text-cyan-500\" /> High Quality FB to MP3</h4>\n            <p>Convert Facebook and TikTok videos to high-fidelity 320kbps MP3 audio instantly. Our one-click system saves the file directly to your user downloads folder for offline listening.</p>\n          </article>\n        </section>\n      </div>\n\n      {/* STICKY FOOTER - Adaptive size for Mobile vs Desktop */}\n      \n<footer className=\"fixed bottom-0 left-0 w-full h-20 bg-[#0f172a]/95 backdrop-blur-lg border-t border-white/10 flex items-center justify-center z-50\">\n  <div className=\"flex flex-col md:flex-row items-center gap-4 px-4 w-full justify-center\">\n     <div className=\"w-full max-w-[320px] md:max-w-[728px] h-[50px] bg-white/5 rounded border border-white/5 flex items-center justify-center italic text-slate-700 text-[9px]\">\n        SAFE STICKY AD AREA\n     </div>\n     {/* LEGAL LINKS FOR AD NETWORKS */}\n     <div className=\"flex gap-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest\">\n        <a href=\"/terms\" target=\"_blank\" className=\"hover:text-blue-500 transition\">Terms</a>\n        <a href=\"#\" className=\"hover:text-blue-500 transition\">Privacy</a>\n     </div>\n  </div>\n</footer>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}