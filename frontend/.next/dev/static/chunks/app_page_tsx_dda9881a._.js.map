{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Hasan-PC/Desktop/multi-downloader/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\ninterface Format {\n  id: string;\n  quality: string;\n}\n\ninterface VideoData {\n  title: string;\n  thumbnail: string;\n  duration: number | null;\n  formats: Format[];\n}\n\nconst BACKEND = \"http://localhost:8000\";\nconst WS_BACKEND = \"ws://localhost:8000\";\n\nexport default function Home() {\n  const [url, setUrl] = useState(\"\");\n  const [videoData, setVideoData] = useState<VideoData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [downloadProgress, setProgress] = useState<{progress: number, status: string} | null>(null);\n\n  const handleAnalyze = async () => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      const res = await axios.get(`${BACKEND}/analyze`, { params: { url: url.trim() } });\n      setVideoData(res.data);\n    } catch (err: any) {\n      setError(err.response?.data?.detail || \"Cannot reach backend. Is Uvicorn running?\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownload = async (formatId: string) => {\n    setError(\"\");\n    try {\n      // 1. Start the task\n      const { data } = await axios.get(`${BACKEND}/download/start`, {\n        params: { url: url.trim(), format_id: formatId }\n      });\n\n      // 2. Connect to WebSocket for live progress\n      const ws = new WebSocket(`${WS_BACKEND}/ws/progress/${data.task_id}`);\n      \n      ws.onmessage = (event) => {\n        const msg = JSON.parse(event.data);\n        setProgress({ progress: msg.progress, status: msg.status });\n        \n        if (msg.status === \"Finished\") {\n          ws.close();\n          alert(\"Download ready in temp_downloads folder!\");\n          setProgress(null);\n        }\n      };\n    } catch (err) {\n      setError(\"Failed to start download.\");\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gray-900 text-white flex flex-col items-center p-10\">\n      <div className=\"max-w-2xl w-full text-center\">\n        <h1 className=\"text-4xl font-bold mb-6\">Pro Downloader</h1>\n        \n        <div className=\"flex gap-2 mb-4\">\n          <input \n            className=\"flex-1 p-4 rounded-xl bg-gray-800 border border-gray-700\"\n            placeholder=\"Paste Link Here...\"\n            value={url}\n            onChange={(e) => setUrl(e.target.value)}\n          />\n          <button onClick={handleAnalyze} className=\"bg-blue-600 px-6 rounded-xl font-bold\">Analyze</button>\n        </div>\n\n        {error && <p className=\"text-red-400 mb-4\">{error}</p>}\n\n        {downloadProgress && (\n          <div className=\"w-full bg-gray-700 rounded-full h-4 mb-4\">\n            <div className=\"bg-blue-500 h-4 rounded-full transition-all\" style={{width: `${downloadProgress.progress}%`}}></div>\n            <p className=\"text-xs mt-1\">{downloadProgress.status}: {downloadProgress.progress}%</p>\n          </div>\n        )}\n\n        {videoData && (\n          <div className=\"bg-gray-800 p-6 rounded-3xl border border-gray-700\">\n            <img src={videoData.thumbnail} className=\"w-full rounded-xl mb-4\" />\n            <h2 className=\"font-bold mb-4\">{videoData.title}</h2>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {videoData.formats.map(f => (\n                <button key={f.id} onClick={() => handleDownload(f.id)} className=\"bg-gray-700 p-3 rounded-lg hover:bg-gray-600\">\n                  {f.quality} MP4\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n}"],"names":["useState","useEffect","axios","Format","id","quality","VideoData","title","thumbnail","duration","formats","BACKEND","WS_BACKEND","Home","url","setUrl","videoData","setVideoData","loading","setLoading","error","setError","downloadProgress","setProgress","progress","status","handleAnalyze","res","get","params","trim","data","err","response","detail","handleDownload","formatId","format_id","ws","WebSocket","task_id","onmessage","event","msg","JSON","parse","close","alert","e","target","value","width","map","f"],"mappings":"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","ignoreList":[]}}]
}