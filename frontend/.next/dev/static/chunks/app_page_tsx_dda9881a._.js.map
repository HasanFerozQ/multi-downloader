{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Hasan-PC/Desktop/multi-downloader/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { Download, Link2, Monitor, Music, CheckCircle, Loader2 } from \"lucide-react\";\n\nconst BACKEND = \"http://localhost:8000\";\nconst WS_BACKEND = \"ws://localhost:8000\";\n\nexport default function Home() {\n  const [url, setUrl] = useState(\"\");\n  const [videoData, setVideoData] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [downloadProgress, setProgress] = useState<any>(null);\n\n  const handleAnalyze = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.get(`${BACKEND}/analyze`, { params: { url: url.trim() } });\n      setVideoData(res.data);\n    } catch (err) {\n      alert(\"Error analyzing link. Make sure backend is running.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const triggerBrowserDownload = (taskId: string, fileName: string) => {\n    // This forces the file to move from your server to the USER'S computer\n    const downloadUrl = `${BACKEND}/download/file/${taskId}`;\n    const link = document.createElement(\"a\");\n    link.href = downloadUrl;\n    link.setAttribute(\"download\", fileName);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  };\n\n  const handleDownload = async (formatId: string) => {\n    try {\n      const { data } = await axios.get(`${BACKEND}/download/start`, {\n        params: { url: url.trim(), format_id: formatId }\n      });\n\n      const ws = new WebSocket(`${WS_BACKEND}/ws/progress/${data.task_id}`);\n      ws.onmessage = (event) => {\n        const msg = JSON.parse(event.data);\n        setProgress({ progress: msg.progress, status: msg.status });\n        \n        if (msg.status === \"Finished\") {\n          triggerBrowserDownload(data.task_id, `${videoData.title}.mp4`);\n          setProgress(null);\n        }\n      };\n    } catch (err) {\n      alert(\"Failed to start download.\");\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-[#0f172a] text-slate-200 flex flex-col items-center p-6 font-sans\">\n      {/* Background Glow */}\n      <div className=\"fixed top-0 left-0 w-full h-full overflow-hidden -z-10\">\n        <div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-900/20 blur-[120px] rounded-full\"></div>\n        <div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-900/20 blur-[120px] rounded-full\"></div>\n      </div>\n\n      <div className=\"max-w-4xl w-full pt-16\">\n        <header className=\"text-center mb-12\">\n          <h1 className=\"text-6xl font-extrabold tracking-tight bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent mb-4\">\n            Pro StreamDown\n          </h1>\n          <p className=\"text-slate-400 text-lg\">High-speed 1080p video & MP3 downloader</p>\n        </header>\n\n        {/* Search Bar */}\n        <div className=\"relative group max-w-2xl mx-auto mb-12\">\n          <div className=\"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000\"></div>\n          <div className=\"relative flex items-center bg-[#1e293b] rounded-2xl p-2 border border-slate-700\">\n            <Link2 className=\"ml-4 text-slate-500\" />\n            <input \n              className=\"flex-1 p-4 bg-transparent outline-none text-white placeholder-slate-500\"\n              placeholder=\"Paste YouTube, TikTok, or FB link...\"\n              value={url}\n              onChange={(e) => setUrl(e.target.value)}\n            />\n            <button \n              onClick={handleAnalyze} \n              disabled={loading}\n              className=\"bg-blue-600 hover:bg-blue-500 px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2\"\n            >\n              {loading ? <Loader2 className=\"animate-spin\" /> : \"Analyze\"}\n            </button>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        {downloadProgress && (\n          <div className=\"max-w-2xl mx-auto mb-8 bg-[#1e293b] p-6 rounded-2xl border border-blue-500/30 animate-pulse\">\n            <div className=\"flex justify-between mb-2 text-sm font-medium\">\n              <span>{downloadProgress.status}</span>\n              <span>{Math.round(downloadProgress.progress)}%</span>\n            </div>\n            <div className=\"w-full bg-slate-800 rounded-full h-3\">\n              <div className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300\" style={{width: `${downloadProgress.progress}%`}}></div>\n            </div>\n          </div>\n        )}\n\n        {/* Video Card */}\n        {videoData && (\n          <div className=\"grid md:grid-cols-2 gap-8 bg-[#1e293b]/50 backdrop-blur-xl p-8 rounded-[2rem] border border-slate-700 shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-700\">\n            <div className=\"relative aspect-video rounded-2xl overflow-hidden shadow-lg\">\n              <img src={videoData.thumbnail} className=\"object-cover w-full h-full\" alt=\"thumbnail\" />\n              <div className=\"absolute bottom-3 right-3 bg-black/70 px-2 py-1 rounded text-xs font-mono\">\n                {videoData.duration}s\n              </div>\n            </div>\n            \n            <div className=\"flex flex-col justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-white mb-2 leading-tight line-clamp-2\">{videoData.title}</h2>\n                <p className=\"text-slate-400 text-sm mb-6 flex items-center gap-2\">\n                  <CheckCircle size={14} className=\"text-green-500\" /> Verfied Content\n                </p>\n              </div>\n\n              <div className=\"space-y-3\">\n                <p className=\"text-xs font-bold uppercase tracking-widest text-slate-500\">Available Formats</p>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {videoData.formats.map((f: any) => (\n                    <button \n                      key={f.id} \n                      onClick={() => handleDownload(f.id)} \n                      className=\"group flex items-center justify-between bg-slate-800 hover:bg-slate-700 p-4 rounded-xl border border-slate-700 hover:border-blue-500/50 transition-all text-left\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <Monitor size={18} className=\"text-blue-400\" />\n                        <div>\n                          <p className=\"text-sm font-bold text-white\">{f.quality}</p>\n                          <p className=\"text-[10px] text-slate-500 uppercase\">MP4 Video</p>\n                        </div>\n                      </div>\n                      <Download size={16} className=\"text-slate-600 group-hover:text-blue-400 transition-colors\" />\n                    </button>\n                  ))}\n                  <button onClick={() => handleDownload(\"mp3\")} className=\"group flex items-center justify-between bg-slate-800 hover:bg-slate-700 p-4 rounded-xl border border-slate-700 hover:border-purple-500/50 transition-all text-left\">\n                    <div className=\"flex items-center gap-3\">\n                      <Music size={18} className=\"text-purple-400\" />\n                      <div>\n                        <p className=\"text-sm font-bold text-white\">Audio Only</p>\n                        <p className=\"text-[10px] text-slate-500 uppercase\">320kbps MP3</p>\n                      </div>\n                    </div>\n                    <Download size={16} className=\"text-slate-600 group-hover:text-purple-400 transition-colors\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n}"],"names":["useState","axios","Download","Link2","Monitor","Music","CheckCircle","Loader2","BACKEND","WS_BACKEND","Home","url","setUrl","videoData","setVideoData","loading","setLoading","downloadProgress","setProgress","handleAnalyze","res","get","params","trim","data","err","alert","triggerBrowserDownload","taskId","fileName","downloadUrl","link","document","createElement","href","setAttribute","body","appendChild","click","remove","handleDownload","formatId","format_id","ws","WebSocket","task_id","onmessage","event","msg","JSON","parse","progress","status","title","e","target","value","Math","round","width","thumbnail","duration","formats","map","f","id","quality"],"mappings":"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","ignoreList":[]}}]
}